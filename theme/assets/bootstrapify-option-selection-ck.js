// ---------------------------------------------------------------------------
// Bootstrapify option selector by Lucid - 17/1/2014
// ---------------------------------------------------------------------------
Shopify.BootstrapifyOptionSelectors=function(e,t){this.b_selectorDivClass="selector-wrapper form-group";this.b_selectorClass="single-option-selector form-control";this.b_linkOptions=t.linkOptions||!1;Shopify.BootstrapifyOptionSelectors.baseConstructor.call(this,e,t);this.bootstrapifyMarkup();this.b_linkOptions&&this.product.available&&this.product.options.length>1&&Shopify.linkOptionSelectors(this.product)};Shopify.extend(Shopify.BootstrapifyOptionSelectors,Shopify.OptionSelectors);Shopify.BootstrapifyOptionSelectors.prototype.bootstrapifyMarkup=function(){var e=this;Shopify.each(this.selectors,function(t){var n=t.element,r=n.parentNode;n.className=e.b_selectorClass;r.className=e.b_selectorDivClass})};var Shopify=Shopify||{};Shopify.optionsMap={};Shopify.updateOptionsInSelector=function(e){switch(e){case 0:var t="root",n=jQuery(".single-option-selector:eq(0)");break;case 1:var t=jQuery(".single-option-selector:eq(0)").val(),n=jQuery(".single-option-selector:eq(1)");break;case 2:var t=jQuery(".single-option-selector:eq(0)").val();t+=" / "+jQuery(".single-option-selector:eq(1)").val();var n=jQuery(".single-option-selector:eq(2)")}var r=n.val();n.empty();var i=Shopify.optionsMap[t];for(var s=0;s<i.length;s++){var o=i[s],u=jQuery("<option></option>").val(o).html(o);n.append(u)}jQuery.inArray(r,i)!==-1&&n.val(r);n.trigger("change")};Shopify.linkOptionSelectors=function(e){for(var t=0;t<e.variants.length;t++){var n=e.variants[t];if(n.available){Shopify.optionsMap.root=Shopify.optionsMap.root||[];Shopify.optionsMap.root.push(n.option1);Shopify.optionsMap.root=Shopify.uniq(Shopify.optionsMap.root);if(e.options.length>1){var r=n.option1;Shopify.optionsMap[r]=Shopify.optionsMap[r]||[];Shopify.optionsMap[r].push(n.option2);Shopify.optionsMap[r]=Shopify.uniq(Shopify.optionsMap[r])}if(e.options.length===3){var r=n.option1+" / "+n.option2;Shopify.optionsMap[r]=Shopify.optionsMap[r]||[];Shopify.optionsMap[r].push(n.option3);Shopify.optionsMap[r]=Shopify.uniq(Shopify.optionsMap[r])}}}Shopify.updateOptionsInSelector(0);e.options.length>1&&Shopify.updateOptionsInSelector(1);e.options.length===3&&Shopify.updateOptionsInSelector(2);jQuery(".single-option-selector:eq(0)").change(function(){Shopify.updateOptionsInSelector(1);e.options.length===3&&Shopify.updateOptionsInSelector(2);return!0});jQuery(".single-option-selector:eq(1)").change(function(){e.options.length===3&&Shopify.updateOptionsInSelector(2);return!0})};